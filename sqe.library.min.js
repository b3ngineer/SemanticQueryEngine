function SemanticQueryEngine(){function h(){this._terms=[];this._terms[0]=[];this._rules=[];this._conflictStrategy=null}var n={equal:0,greaterThanOrEqual:1,greaterThan:2,lessThanOrEqual:-1,lessThan:-2};h.prototype._name="SearchModel";h.prototype._numberExists=function(a){for(var b=this._terms[0].length,d=0,c=b-1,b=Math.floor(b/2);c>=d;){var f=this._terms[0][b];if(a===f)return!0;a<f?c=b-1:d=b+1;b=Math.floor((d+c)/2)}return!1};h.prototype.addTerm=function(a){if("number"===typeof a)this._numberExists(a)||
(this._terms[0].push(a),this._terms[0].sort());else{var b=a.toString();a=b.length;if("undefined"===typeof this._terms[a])this._terms[a]=b;else if(!(-1<this._terms[a].indexOf(b))){for(var d=this._terms[a].length/a,b=[b],c=0;c<d;c++)b.push(this._terms[a].substring(c*a,c*a+a));b.sort();this._terms[a]=b.join("")}}};h.prototype.addRules=function(a){for(var b=0,d=a.length;b<d;b++)for(var c=0,f=a[b].terms.length;c<f;c++){var g=a[b].terms[c];this.addTerm(g)}b=0;for(d=a.length;b<d;b++){for(var e=[],f=a[b].terms.length,
h=0,c=0;c<f;c++){var g=a[b].terms[c],k=this.getTermId(g),g=k[0],l=k[1];g>h&&(h=g);"undefined"===typeof e[g]&&(e[g]=[]);e[g][l]=k;"undefined"!==typeof a[b].operators&&"undefined"!=typeof a[b].operators[c]?(k=n[a[b].operators[c].toString()],e[g][l][2]="undefined"!==typeof k?k:a[b].operators[c]):e[g][l][2]=0}e[h+1]=f;e[h+2]=a[b].action;this._rules.push(e)}};h.prototype.getNumberId=function(a){for(var b=this._terms[0].length,d=0,c=b-1,b=Math.floor(b/2);c>=d;){var f=this._terms[0][b];if(a===f)return[0,
b];a<f?c=b-1:d=b+1;b=Math.floor((d+c)/2)}return!1};h.prototype.getTermId=function(a){if("number"===typeof a)return this.getNumberId(a);a=a.toString();var b=a.length;if(!this._terms[b])return!1;for(var d=this._terms[b].length/b,c=0,f=d-1,d=Math.floor(d/2);f>=c;){var g=b*d,e=this._terms[b].substr(g,b);if(a===e)return[b,g/b];a<e?f=d-1:c=d+1;d=Math.floor((c+f)/2)}return!1};h.prototype.isEqualTermId=function(a,b){if(!a||!b||a.length!==b.length)return!1;for(var d=0;d<a.length;d++)if(a[d]!==b[d])return!1;
return!0};h.prototype.executeQuery=function(a){for(var b=[],d=[],c=0,f=a.length;c<f;c++)for(var g=this.getTermId(a[c]),e=0,h=this._rules.length;e<h;e++){if("undefined"===typeof b[e])b[e]=0;else if(!1===b[e])continue;var k=g[1],l=this._rules[e][g[0]];"undefined"===typeof l||"undefined"===typeof l[k]||!(l[k]instanceof Array)?b[e]=!1:b[e]++}c=0;for(a=b.length;c<a;c++)f=this._rules[c].length,b[c]===this._rules[c][f-2]&&d.push(this._rules[c][f-1]);"function"===typeof this._conflictStrategy&&this._conflictStrategy(d);
return d};this.searchModel=new h;var m={addDataModel:function(a){"undefined"!==typeof a._terms&&0<a._terms.length&&"undefined"!==typeof a._rules&&0<a._rules.length?(this.searchModel._terms=a._terms,this.searchModel._rules=a._rules):this.searchModel.addRules(a.rules);this.searchModel._conflictStrategy=a.conflictStrategy},isEqualTermId:function(a,b){return this.searchModel.isEqualTermId(a,b)},getNumberId:function(a){return this.searchModel.getNumberId(a)},getTermId:function(a){return this.searchModel.getTermId(a)},
executeQuery:function(a){return this.searchModel.executeQuery(a)}};"function"===typeof this.helpers?this.helpers(m):(this.addDataModel=m.addDataModel,this.getTermId=m.getTermId,this.getNumberId=m.getNumberId,this.isEqualTermId=m.isEqualTermId,this.executeQuery=m.executeQuery)}SemanticQueryEngine.prototype._name="SemanticQueryEngine";
